$date
	Tue Nov 18 11:20:56 2025
$end
$version
	Icarus Verilog
$end
$timescale
	1ps
$end
$scope module simple_spi_tb $end
$var wire 1 ! sclk $end
$var wire 8 " s_rx [7:0] $end
$var wire 1 # s_done $end
$var wire 1 $ mosi $end
$var wire 1 % miso $end
$var wire 8 & m_rx [7:0] $end
$var wire 1 ' m_done $end
$var wire 1 ( cs_n $end
$var reg 1 ) clk $end
$var reg 1 * m_start $end
$var reg 8 + m_tx [7:0] $end
$var reg 1 , rst_n $end
$var reg 8 - s_tx [7:0] $end
$scope module master $end
$var wire 1 ) clk $end
$var wire 8 . data_in [7:0] $end
$var wire 1 , rst_n $end
$var wire 1 * start $end
$var wire 1 $ mosi $end
$var wire 1 % miso $end
$var parameter 32 / ACTIVE $end
$var parameter 32 0 FINISH $end
$var parameter 32 1 IDLE $end
$var parameter 32 2 WIDTH $end
$var reg 4 3 bit_cnt [3:0] $end
$var reg 3 4 clk_cnt [2:0] $end
$var reg 1 ( cs_n $end
$var reg 8 5 data_out [7:0] $end
$var reg 1 ' done $end
$var reg 8 6 rx_reg [7:0] $end
$var reg 1 ! sclk $end
$var reg 2 7 state [1:0] $end
$var reg 8 8 tx_reg [7:0] $end
$upscope $end
$scope module slave $end
$var wire 1 ) clk $end
$var wire 1 9 cs_fall $end
$var wire 1 ( cs_n $end
$var wire 1 : cs_rise $end
$var wire 8 ; data_in [7:0] $end
$var wire 1 $ mosi $end
$var wire 1 , rst_n $end
$var wire 1 ! sclk $end
$var wire 1 < sclk_fall $end
$var wire 1 = sclk_rise $end
$var wire 1 % miso $end
$var parameter 32 > WIDTH $end
$var reg 4 ? bit_cnt [3:0] $end
$var reg 1 @ cs_prev $end
$var reg 8 A data_out [7:0] $end
$var reg 1 # done $end
$var reg 8 B rx_reg [7:0] $end
$var reg 1 C sclk_prev $end
$var reg 8 D tx_reg [7:0] $end
$upscope $end
$upscope $end
$enddefinitions $end
$comment Show the parameter values. $end
$dumpall
b1000 >
b1000 2
b0 1
b10 0
b1 /
$end
#0
$dumpvars
bx D
0C
bx B
bx A
1@
b0 ?
0=
0<
b0 ;
0:
09
bx 8
b0 7
bx 6
bx 5
b0 4
b0 3
b0 .
b0 -
0,
b0 +
0*
0)
1(
0'
bx &
z%
x$
0#
bx "
0!
$end
#5000
1)
#10000
0)
#15000
1)
#20000
0)
1,
#25000
1)
#30000
0)
#35000
1)
#40000
0)
#45000
1)
#50000
0)
#55000
1)
#60000
0)
#65000
1)
#70000
0)
1*
b1011010 -
b1011010 ;
b10100101 +
b10100101 .
#75000
19
x%
1$
b1 7
0(
b10100101 8
1)
#80000
0)
0*
#85000
0%
09
b1011010 D
0@
b1 4
1)
#90000
0)
#95000
b10 4
1)
#100000
0)
#105000
b11 4
1)
#110000
0)
#115000
1=
bx0 6
1!
b0 4
1)
#120000
0)
#125000
0=
b1 ?
bx1 B
1C
b1 4
1)
#130000
0)
#135000
b10 4
1)
#140000
0)
#145000
b11 4
1)
#150000
0)
#155000
0$
1<
b1 3
b1001010 8
0!
b0 4
1)
#160000
0)
#165000
1%
0<
b10110100 D
0C
b1 4
1)
#170000
0)
#175000
b10 4
1)
#180000
0)
#185000
b11 4
1)
#190000
0)
#195000
1=
bx01 6
1!
b0 4
1)
#200000
0)
#205000
0=
b10 ?
bx10 B
1C
b1 4
1)
#210000
0)
#215000
b10 4
1)
#220000
0)
#225000
b11 4
1)
#230000
0)
#235000
1$
1<
b10 3
b10010100 8
0!
b0 4
1)
#240000
0)
#245000
0%
0<
b1101000 D
0C
b1 4
1)
#250000
0)
#255000
b10 4
1)
#260000
0)
#265000
b11 4
1)
#270000
0)
#275000
1=
bx010 6
1!
b0 4
1)
#280000
0)
#285000
0=
b11 ?
bx101 B
1C
b1 4
1)
#290000
0)
#295000
b10 4
1)
#300000
0)
#305000
b11 4
1)
#310000
0)
#315000
0$
1<
b11 3
b101000 8
0!
b0 4
1)
#320000
0)
#325000
1%
0<
b11010000 D
0C
b1 4
1)
#330000
0)
#335000
b10 4
1)
#340000
0)
#345000
b11 4
1)
#350000
0)
#355000
1=
bx0101 6
1!
b0 4
1)
#360000
0)
#365000
0=
b100 ?
bx1010 B
1C
b1 4
1)
#370000
0)
#375000
b10 4
1)
#380000
0)
#385000
b11 4
1)
#390000
0)
#395000
1<
b100 3
b1010000 8
0!
b0 4
1)
#400000
0)
#405000
0<
b10100000 D
0C
b1 4
1)
#410000
0)
#415000
b10 4
1)
#420000
0)
#425000
b11 4
1)
#430000
0)
#435000
1=
bx01011 6
1!
b0 4
1)
#440000
0)
#445000
0=
b101 ?
bx10100 B
1C
b1 4
1)
#450000
0)
#455000
b10 4
1)
#460000
0)
#465000
b11 4
1)
#470000
0)
#475000
1$
1<
b101 3
b10100000 8
0!
b0 4
1)
#480000
0)
#485000
0%
0<
b1000000 D
0C
b1 4
1)
#490000
0)
#495000
b10 4
1)
#500000
0)
#505000
b11 4
1)
#510000
0)
#515000
1=
bx010110 6
1!
b0 4
1)
#520000
0)
#525000
0=
b110 ?
bx101001 B
1C
b1 4
1)
#530000
0)
#535000
b10 4
1)
#540000
0)
#545000
b11 4
1)
#550000
0)
#555000
0$
1<
b110 3
b1000000 8
0!
b0 4
1)
#560000
0)
#565000
1%
0<
b10000000 D
0C
b1 4
1)
#570000
0)
#575000
b10 4
1)
#580000
0)
#585000
b11 4
1)
#590000
0)
#595000
1=
bx0101101 6
1!
b0 4
1)
#600000
0)
#605000
0=
b111 ?
bx1010010 B
1C
b1 4
1)
#610000
0)
#615000
b10 4
1)
#620000
0)
#625000
b11 4
1)
#630000
0)
#635000
1$
1<
b111 3
b10000000 8
0!
b0 4
1)
#640000
0)
#645000
0%
0<
b0 D
0C
b1 4
1)
#650000
0)
#655000
b10 4
1)
#660000
0)
#665000
b11 4
1)
#670000
0)
#675000
1=
b1011010 6
1!
b0 4
1)
#680000
0)
#685000
0=
b1000 ?
b10100101 B
1C
b1 4
1)
#690000
0)
#695000
b10 4
1)
#700000
0)
#705000
b11 4
1)
#710000
0)
#715000
0$
1<
b10 7
b1000 3
b0 8
0!
b0 4
1)
#720000
0)
#725000
0<
1:
z%
0C
b0 7
1'
b1011010 &
b1011010 5
1(
1)
#730000
0)
#735000
0:
0'
1#
b10100101 "
b10100101 A
1@
1)
#740000
0)
#745000
0#
1)
#750000
0)
#755000
1)
#760000
0)
#765000
1)
#770000
0)
#775000
1)
#780000
0)
#785000
1)
#790000
0)
#795000
1)
#800000
0)
#805000
1)
#810000
0)
#815000
1)
#820000
0)
#825000
1)
#830000
0)
#835000
19
0%
b1 7
0(
b0 3
b111100 8
1)
1*
b11000011 -
b11000011 ;
b111100 +
b111100 .
#840000
0)
#845000
1%
09
b0 ?
b11000011 D
0@
b1 4
1)
0*
#850000
0)
#855000
b10 4
1)
#860000
0)
#865000
b11 4
1)
#870000
0)
#875000
1=
b10110101 6
1!
b0 4
1)
#880000
0)
#885000
0=
b1 ?
b1001010 B
1C
b1 4
1)
#890000
0)
#895000
b10 4
1)
#900000
0)
#905000
b11 4
1)
#910000
0)
#915000
1<
b1 3
b1111000 8
0!
b0 4
1)
#920000
0)
#925000
0<
b10000110 D
0C
b1 4
1)
#930000
0)
#935000
b10 4
1)
#940000
0)
#945000
b11 4
1)
#950000
0)
#955000
1=
b1101011 6
1!
b0 4
1)
#960000
0)
#965000
0=
b10 ?
b10010100 B
1C
b1 4
1)
#970000
0)
#975000
b10 4
1)
#980000
0)
#985000
b11 4
1)
#990000
0)
#995000
1$
1<
b10 3
b11110000 8
0!
b0 4
1)
#1000000
0)
#1005000
0%
0<
b1100 D
0C
b1 4
1)
#1010000
0)
#1015000
b10 4
1)
#1020000
0)
#1025000
b11 4
1)
#1030000
0)
#1035000
1=
b11010110 6
1!
b0 4
1)
#1040000
0)
#1045000
0=
b11 ?
b101001 B
1C
b1 4
1)
#1050000
0)
#1055000
b10 4
1)
#1060000
0)
#1065000
b11 4
1)
#1070000
0)
#1075000
1<
b11 3
b11100000 8
0!
b0 4
1)
#1080000
0)
#1085000
0<
b11000 D
0C
b1 4
1)
#1090000
0)
#1095000
b10 4
1)
#1100000
0)
#1105000
b11 4
1)
#1110000
0)
#1115000
1=
b10101100 6
1!
b0 4
1)
#1120000
0)
#1125000
0=
b100 ?
b1010011 B
1C
b1 4
1)
#1130000
0)
#1135000
b10 4
1)
#1140000
0)
#1145000
b11 4
1)
#1150000
0)
#1155000
1<
b100 3
b11000000 8
0!
b0 4
1)
#1160000
0)
#1165000
0<
b110000 D
0C
b1 4
1)
#1170000
0)
#1175000
b10 4
1)
#1180000
0)
#1185000
b11 4
1)
#1190000
0)
#1195000
1=
b1011000 6
1!
b0 4
1)
#1200000
0)
#1205000
0=
b101 ?
b10100111 B
1C
b1 4
1)
#1210000
0)
#1215000
b10 4
1)
#1220000
0)
#1225000
b11 4
1)
#1230000
0)
#1235000
1<
b101 3
b10000000 8
0!
b0 4
1)
#1240000
0)
#1245000
0<
b1100000 D
0C
b1 4
1)
#1250000
0)
#1255000
b10 4
1)
#1260000
0)
#1265000
b11 4
1)
#1270000
0)
#1275000
1=
b10110000 6
1!
b0 4
1)
#1280000
0)
#1285000
0=
b110 ?
b1001111 B
1C
b1 4
1)
#1290000
0)
#1295000
b10 4
1)
#1300000
0)
#1305000
b11 4
1)
#1310000
0)
#1315000
0$
1<
b110 3
b0 8
0!
b0 4
1)
#1320000
0)
#1325000
1%
0<
b11000000 D
0C
b1 4
1)
#1330000
0)
#1335000
b10 4
1)
#1340000
0)
#1345000
b11 4
1)
#1350000
0)
#1355000
1=
b1100001 6
1!
b0 4
1)
#1360000
0)
#1365000
0=
b111 ?
b10011110 B
1C
b1 4
1)
#1370000
0)
#1375000
b10 4
1)
#1380000
0)
#1385000
b11 4
1)
#1390000
0)
#1395000
1<
b111 3
0!
b0 4
1)
#1400000
0)
#1405000
0<
b10000000 D
0C
b1 4
1)
#1410000
0)
#1415000
b10 4
1)
#1420000
0)
#1425000
b11 4
1)
#1430000
0)
#1435000
1=
b11000011 6
1!
b0 4
1)
#1440000
0)
#1445000
0=
b1000 ?
b111100 B
1C
b1 4
1)
#1450000
0)
#1455000
b10 4
1)
#1460000
0)
#1465000
b11 4
1)
#1470000
0)
#1475000
1<
b10 7
b1000 3
0!
b0 4
1)
#1480000
0)
#1485000
0<
1:
z%
b0 D
0C
b0 7
1'
b11000011 &
b11000011 5
1(
1)
#1490000
0)
#1495000
0:
0'
1#
b111100 "
b111100 A
1@
1)
#1500000
0)
#1505000
0#
1)
#1510000
0)
#1515000
1)
#1520000
0)
#1525000
1)
#1530000
0)
#1535000
1)
#1540000
0)
#1545000
1)
#1550000
0)
#1555000
1)
#1560000
0)
#1565000
1)
#1570000
0)
#1575000
1)
#1580000
0)
#1585000
1)
#1590000
0)
#1595000
1)
